
# Plan: Redise√±o Integral del Dashboard Gerente de Sucursal

## Visi√≥n General

El nuevo dashboard del Gerente de Sucursal de Crepes & Waffles ser√° **"Los ojos de un estratega profesional de datos sobre cada sucursal"** - una herramienta de gerencia asistida por IA que transforma datos complejos en decisiones accionables.

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DASHBOARD GERENTE DE SUCURSAL                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ     üå§Ô∏è IA DE CONDICIONES (M√≥dulo Estrella)                 ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ    CLIMA      ‚îÇ  CALENDARIO   ‚îÇ   NOTICIAS    ‚îÇ          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  "D√≠a lluvio- ‚îÇ  "Ma√±ana es   ‚îÇ  "Final       ‚îÇ          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   so: domici- ‚îÇ   festivo:    ‚îÇ   Liga BetPlay‚îÇ          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   lios +40%"  ‚îÇ   ventas +25%"‚îÇ   92% impacto"‚îÇ          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ    üí¨ CONEKTAO AI           ‚îÇ      üìä AUDITOR√çA            ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   Chat contextual           ‚îÇ   Estado sucursal: 82%       ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   conectado a datos         ‚îÇ   ‚Ä¢ Personal: alertas        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   reales del negocio        ‚îÇ   ‚Ä¢ Errores: patrones        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ                             ‚îÇ   ‚Ä¢ Rotaci√≥n productos       ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## M√≥dulos a Implementar

### 1. IA de Condiciones (M√≥dulo Principal)
La secci√≥n m√°s importante y visible del dashboard. Analiza factores externos que afectan las ventas.

**Componentes:**
- **Clima del D√≠a** - API OpenWeatherMap (gratis 1000 llamadas/d√≠a)
  - Muestra condici√≥n actual y pron√≥stico
  - Recomendaciones autom√°ticas basadas en hist√≥rico:
    - "D√≠a lluvioso ‚Üí Domicilios +40%, preparar empaques"
    - "D√≠a soleado ‚Üí Mesas llenas, reforzar meseros"

- **Calendario Festivos** - API Tallyfy (gratis)
  - Detecta festivos de Colombia autom√°ticamente
  - "Ma√±ana es festivo ‚Üí Ventas proyectadas +25%"
  - "Pr√≥ximo puente: preparar inventario adicional"

- **Noticias Relevantes** - API NewsAPI o WorldNewsAPI
  - Busca eventos deportivos, conciertos, protestas
  - "Final Liga BetPlay hoy - 92% probabilidad de afectar ventas"
  - "Concierto en Movistar Arena - zona con tr√°fico pesado"

### 2. Conektao AI (Chat Contextual)
Chat de IA conectado a Gemini que accede a datos reales de la sucursal espec√≠fica.

**Capacidades:**
- Responde preguntas sobre ventas del d√≠a, semana, mes
- Analiza rendimiento de productos
- Compara con otras sucursales
- Usa factores externos (clima, eventos) en sus an√°lisis

### 3. Auditor√≠a (Ojos sobre la Sucursal)
Panel de estado y alertas inteligentes SIN mencionar inventario.

**M√©tricas:**
- **Estado General**: Porcentaje de salud (ej: 82%)
- **Personal**: 
  - Puntualidad promedio
  - "Empleados llegando 12 min tarde en promedio esta semana"
- **Errores Detectados**:
  - Patrones de errores en productos espec√≠ficos
  - "2 errores recurrentes en Crepe Stroganoff - revisar receta"
- **Rotaci√≥n de Productos**:
  - Productos que no se est√°n vendiendo
  - "Impulsar productos con pollo hoy - ventas 30% abajo"

---

## Arquitectura T√©cnica

### Edge Functions Nuevas

**1. `crepes-conditions-ai` (Nueva)**
```text
Entrada: { city: "Bogot√°", branch_id: "zona-t" }
Proceso:
  1. Llama a OpenWeatherMap API (clima actual y pron√≥stico)
  2. Llama a API de festivos Colombia (pr√≥ximos 7 d√≠as)
  3. Llama a NewsAPI (noticias de la ciudad + deportes)
  4. Env√≠a todo a Gemini para an√°lisis contextual
  5. Genera recomendaciones espec√≠ficas
Salida: {
  weather: { condition, temp, recommendation },
  calendar: { isHoliday, nextHoliday, recommendation },
  news: { events[], impactProbability, recommendation }
}
```

**2. `crepes-branch-audit` (Nueva)**
```text
Entrada: { branch_id: "zona-t" }
Proceso:
  1. Analiza datos simulados de personal
  2. Detecta patrones de errores
  3. Analiza rotaci√≥n de productos
  4. Calcula estado general
Salida: {
  overallScore: 82,
  staffAlerts: [...],
  errorPatterns: [...],
  productRotation: { underperforming: [...], recommendation }
}
```

**3. `crepes-chat-ai` (Nueva - basada en conektao-ai)**
```text
Chat contextual con datos simulados de la sucursal espec√≠fica
```

### Componentes React Nuevos

1. **ConditionsAIPanel.tsx** - Panel principal con clima, calendario, noticias
2. **WeatherCard.tsx** - Tarjeta de clima con recomendaciones
3. **CalendarCard.tsx** - Tarjeta de festivos/eventos
4. **NewsImpactCard.tsx** - Tarjeta de noticias con probabilidad de impacto
5. **ConektaoChat.tsx** - Chat de IA contextual
6. **AuditPanel.tsx** - Panel de auditor√≠a con estado y alertas
7. **ProductRotationCard.tsx** - Recomendaciones de productos a impulsar
8. **BranchManagerDashboard.tsx** - Actualizaci√≥n completa del layout

---

## Dise√±o Visual

### Paleta de Colores
- **Principal**: Caf√© Crepes (#5C4033, #8B7355)
- **Acento IA**: Gradiente naranja/cian de Conektao
- **Estados**: Verde (bueno), √Åmbar (atenci√≥n), Rojo (cr√≠tico)
- **Fondos**: Crema/bone (#F5F0E8, #FAF6F1)

### Est√©tica
- Estilo Apple/visionOS con glassmorphism sutil
- Animaciones suaves con Framer Motion
- Tarjetas flotantes con sombras elegantes
- Micro-animaciones en iconos de IA
- Bordes con glow sutil en secciones de IA

### Layout Responsivo
```text
Desktop (lg+):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           IA DE CONDICIONES (full width)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    CONEKTAO AI      ‚îÇ      AUDITOR√çA        ‚îÇ
‚îÇ      (50%)          ‚îÇ        (50%)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Mobile:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  IA DE CONDICIONES  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    CONEKTAO AI      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ     AUDITOR√çA       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## APIs Externas

### 1. OpenWeatherMap (Clima)
- **Plan**: Free (1000 llamadas/d√≠a)
- **Endpoint**: `api.openweathermap.org/data/2.5/weather`
- **Datos**: Temperatura, condici√≥n, humedad, pron√≥stico

### 2. Tallyfy Holidays API (Festivos Colombia)
- **Plan**: Gratuito
- **Endpoint**: `tallyfy.com/national-holidays/api/CO/2026.json`
- **Datos**: Festivos oficiales de Colombia

### 3. NewsAPI o WorldNewsAPI (Noticias)
- **Plan**: Free tier disponible
- **Endpoint**: `newsapi.org/v2/top-headlines?country=co`
- **Datos**: Noticias locales, deportes, eventos

---

## Datos Simulados para Demo

Dado que esto es una demo para convencer al CEO, todos los datos ser√°n simulados pero realistas:

**Sucursal Zona T - Bogot√°:**
- Ventas del d√≠a: $4,250,000 COP
- Personal: 8 empleados activos
- Pedidos: 127 completados
- Estado: 82%

**Alertas de Personal:**
- "Promedio llegada: 12 min tarde esta semana"
- "Mar√≠a Gonz√°lez: 3 ausencias este mes"

**Patrones de Errores:**
- "Crepe Stroganoff: 5 errores en preparaci√≥n (revisar receta)"
- "Waffle Nutella: 2 devoluciones por presentaci√≥n"

**Rotaci√≥n de Productos:**
- "Productos con pollo: -30% vs semana pasada"
- "Helado pistacho: menor rotaci√≥n del mes"
- Recomendaci√≥n: "Hoy impulsar: Crepe de Pollo, Helado Pistacho"

---

## Archivos a Crear/Modificar

### Nuevos Archivos
1. `supabase/functions/crepes-conditions-ai/index.ts`
2. `supabase/functions/crepes-branch-audit/index.ts`
3. `supabase/functions/crepes-chat-ai/index.ts`
4. `src/components/crepes-demo/conditions/ConditionsAIPanel.tsx`
5. `src/components/crepes-demo/conditions/WeatherCard.tsx`
6. `src/components/crepes-demo/conditions/CalendarCard.tsx`
7. `src/components/crepes-demo/conditions/NewsImpactCard.tsx`
8. `src/components/crepes-demo/audit/AuditPanel.tsx`
9. `src/components/crepes-demo/audit/StaffAlertsCard.tsx`
10. `src/components/crepes-demo/audit/ErrorPatternsCard.tsx`
11. `src/components/crepes-demo/audit/ProductRotationCard.tsx`
12. `src/components/crepes-demo/chat/ConektaoChat.tsx`

### Archivos a Modificar
1. `src/components/crepes-demo/BranchManagerDashboard.tsx` - Redise√±o completo
2. `supabase/config.toml` - Agregar nuevas funciones

---

## Flujo de Usuario

1. **Gerente abre el dashboard** ‚Üí Ve inmediatamente IA de Condiciones
2. **Panel de Clima** muestra: "D√≠a lluvioso en Bogot√° - Domicilios +40%"
3. **Panel de Calendario** muestra: "Ma√±ana festivo - Preparar inventario extra"
4. **Panel de Noticias** muestra: "Final Millonarios hoy 8pm - 87% impacto zona norte"
5. **Secci√≥n Auditor√≠a** muestra: "Estado 82% - 2 alertas de personal"
6. **Secci√≥n Chat** permite preguntas libres sobre datos de la sucursal
7. **Rotaci√≥n Productos**: "Impulsar hoy: productos con pollo y helado pistacho"

---

## Resultado Esperado

Un dashboard que al verlo, el CEO de Crepes & Waffles piense:

> "Esto es exactamente lo que necesitamos. Un gerente con esta herramienta toma mejores decisiones que uno sin ella. Cada sucursal tendr√≠a un estratega de datos 24/7."

El dise√±o ser√° tan impactante visualmente y tan √∫til funcionalmente que no habr√° duda de que Conektao entiende el negocio de restaurantes a nivel enterprise.
